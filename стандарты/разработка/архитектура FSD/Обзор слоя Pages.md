Страницы играют роль точки входа в приложение, и их правильная организация помогает значительно упростить поддержку и масштабирование проекта.

# Страницы и роутинг

В этом видео мы разбираемся организацию страниц в приложениях. Мы также рассмотрим, как различные популярные фреймворки организуют роутинг, и какие подходы рекомендуются для работы с Atomic Router.

**Страницы** - это точки входа в приложение, которые всегда привязываются к конкретному URL. Для веб-приложений обычно используется правило "одна страница - один URL". Однако существует возможность связывать одну страницу с несколькими URL, используя алиасы или редиректы. Это позволяет поддерживать старые ссылки или же создавать удобные переходы между страницами.

Подход в организации страниц отличается в зависимости от среды разработки: в веб-приложениях это один URL на страницу, в то время как в мобильных или десктопных приложениях может быть иная структура.

# Популярные Фреймворки

### Vike

- В Vike используется файловый роутинг по умолчанию, что означает, что структура файлов определяет URL.
- Присутствуют служебные страницы и символы, которые позволяют организовать специальные фичи.
- Файловый роутинг можно отключить или настроить по своему усмотрению.

### Next.js

- **Pages Router** и **App Router** представляют собой два актуальных подхода к роутингу в Next.js.

  - Pages может находиться как в корне репозитория, так и в `src/pages`. В случае наличия обеих папок, предпочтение будет отдано директории в корне.
  - В Pages каждая страница - это отдельный файл. Вложенность определяется через директории.

- **App Router** сложнее и использует больше специальных символов, что иногда делает конфигурацию менее очевидной.

### Remix

- Remix использует директорию **App** для организации роутинга.
- Файловый роутинг организован неплохо, и можно вручную указать соответствие между файлами и роутами.

# Общие Рекомендации

В фреймворках рекомендуется отделять бизнес-логику от специфических требований к роутингу, чтобы улучшить читаемость и поддерживаемость кода. В FSD это достигается за счет вынесения роутинга в сегмент Shared, где URL и их соответствие страницам описаны отдельно от самой реализации страниц.

Обычно следование требованиям фреймворка вызывает появление двух директорий `pages` / `src/pages` или `app` / `src/app`, что зачастую вызывает сложности у новичков в команде разработки.

### Структура Страниц в FSD

В FSD каждая страница представлена тремя основными файлами:

1. **Компонент** - визуальное представление страницы.
2. **Модель** - логика, связанная с управлением состоянием и данными страницы.
3. **Индекс** - связка модели и компонента, особенно актуально для роутинга и слоя Processes.

Рекомендуется держать все три файла в одной директории, чтобы обеспечить согласованность структуры и облегчить поддержку. Можно создавать дополнительные директории для организации уникальной логики.

**Важно:** Начните с простой структуры и усложняйте только тогда, когда это необходимо. Слишком раннее разбиение на маленькие файлы может привести к избыточной сложности.

### Семантическое Именование

Вместо использования файлового роутинга, FSD рекомендует использовать **семантическое именование страниц**. Это означает, что директории страниц именуются по их назначению, а не по соответствующему им URL. Например, вместо `posts/[id]/edit` лучше использовать `posts-edit`. Это помогает автоматически группировать страницы по логическим группам и ассоциированными с ними действиям, что упрощает навигацию по проекту.

**От общего к частному**: сначала указывайте логическую группу/сущность, затем действие(например, `auth-login`, `auth-register`, `auth-recovery`). Такой подход упрощает навигацию по файловой системе и позволяет быстро понять, что делает каждая страница.

### Atomic Router

**Atomic Router** в связке с FSD помогает отделить определение роутов, их URL от самих страниц. Это особенно полезно для проектов со сложной структурой, даже микро-фронтендами. Вот ключевые идеи:

- **Роуты описываются как объекты**, что позволяет хранить логику роутинга отдельно от логики компонентов.
- **Цепочки роутов**: Очень удобно открывать несколько роутов последовательно (например, проверка сессии пользователя, загрузка необходимых данных и затем открытие страницы). Atomic Router помогает легко реализовать подобные цепочки.
- **Использование алиасов**: Одному URL можно назначить несколько роутов, которые будут открываться вместе. Это можно использовать например, для подсвечивания активной секции в навигации, вместо метчинга по части URL.
